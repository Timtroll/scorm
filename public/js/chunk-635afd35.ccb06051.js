(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-635afd35"],{"456d":function(t,e,s){var a=s("4bf8"),i=s("0d58");s("5eda")("keys",function(){return function(t){return i(a(t))}})},"5eda":function(t,e,s){var a=s("5ca1"),i=s("8378"),r=s("79e5");t.exports=function(t,e){var s=(i.Object||{})[t]||Object[t],n={};n[t]=e(s),a(a.S+a.F*r(function(){s(1)}),"Object",n)}},"9e1b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",{attrs:{header:!0,"header-large":!1,"header-bgr-default":!0,"header-left":!0,"header-right":!0,"body-padding":!1,"header-small":!0,"header-padding-none":!0,loader:t.loader},scopedSlots:t._u([{key:"headerLeft",fn:function(){return[t.header?s("div",{staticClass:"uk-flex"},[s("button",{staticClass:"uk-button uk-button-success pos-border-radius-none pos-border-none",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.add_row(e)}}},[s("img",{attrs:{src:"/img/icons/icon__plus.svg",width:"16",height:"16","uk-svg":""}}),s("span",{staticClass:"uk-margin-small-left uk-visible@m",domProps:{textContent:t._s(t.$t("actions.add"))}})]),t.massEdit&&t.tableNotEmpty?s("button",{staticClass:"uk-button-default pos-border-radius-none pos-border-none uk-flex uk-flex-middle",attrs:{disabled:""}},[s("img",{attrs:{src:"/img/icons/icon__trash.svg","uk-svg":"",width:"12",height:"12"}}),s("span",{staticClass:"uk-margin-small-left uk-visible@s",domProps:{textContent:t._s(t.$t("actions.remove"))}})]):t._e()]):t._e()]},proxy:!0},{key:"headerRight",fn:function(){return[t.tableNotEmpty?s("div",{staticClass:"uk-flex-column uk-flex pos-border-left"},[s("button",{staticClass:"uk-button uk-button-default pos-border-radius-none pos-border-none",attrs:{type:"button"}},[s("img",{attrs:{src:"/img/icons/icon__input_table_row.svg",width:"20",height:"20","uk-svg":""}})]),s("div",{attrs:{"uk-dropdown":"mode: click; offset: 0; pos: bottom-right; animation: uk-animation-slide-right-medium"}},[s("ul",{staticClass:"uk-nav uk-dropdown-nav"},[s("li",{staticClass:"uk-nav-header",domProps:{textContent:t._s(t.$t("table.headerItems"))}}),s("li",{staticClass:"uk-nav-divider"}),t._l(t.header,function(e,a){return s("li",[s("label",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[s("span",{staticClass:"uk-width-expand uk-text-truncate",domProps:{textContent:t._s(e.label)}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.show,expression:"item.show",modifiers:{number:!0}}],staticClass:"pos-checkbox-switch xsmall",attrs:{"true-value":1,"false-value":0,type:"checkbox"},domProps:{checked:Array.isArray(e.show)?t._i(e.show,null)>-1:t._q(e.show,1)},on:{change:[function(s){var a=e.show,i=s.target,r=i.checked?1:0;if(Array.isArray(a)){var n=t._n(null),o=t._i(a,n);i.checked?o<0&&t.$set(e,"show",a.concat([n])):o>-1&&t.$set(e,"show",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(e,"show",r)},function(e){return t.updateVisibleColumns(t.header)}]}})])])})],2)])]):t._e()]},proxy:!0},{key:"header",fn:function(){return[t.tableNotEmpty?s("div",{staticClass:"uk-position-relative uk-width-medium uk-margin-auto-left pos-border-left"},[t.searchInput?s("a",{staticClass:"uk-form-icon uk-form-icon-flip",on:{click:function(e){return e.preventDefault(),t.clearSearchVal(e)}}},[s("img",{attrs:{src:"/img/icons/icon__close.svg",width:"10",height:"10","uk-svg":""}})]):t._e(),s("div",{staticClass:"uk-form-icon"},[s("img",{attrs:{src:"/img/icons/icon__search.svg",width:"14",height:"14","uk-svg":""}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"uk-input pos-border-radius-none pos-border-none",attrs:{type:"text",placeholder:"Поиск"},domProps:{value:t.searchInput},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.clearSearchVal(e)},input:function(e){e.target.composing||(t.searchInput=e.target.value)}}})]):t._e()]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"pos-table-container"},[t.tableNotEmpty?s("table",{staticClass:"uk-table pos-table uk-table-striped uk-table-hover uk-table-divider uk-table-small uk-table-middle"},[s("thead",{staticClass:"pos-table-header"},[s("tr",[s("th",{staticClass:"pos-table-expand uk-table-shrink uk-text-center"},[s("div",{staticStyle:{width:"16px"}},[s("img",{attrs:{src:"/img/icons/icon__expand.svg",width:"16",height:"16","uk-svg":""}})])]),t._l(t.tableHeader,function(e){return s("th",{class:{inline:1===e.inline},domProps:{textContent:t._s(e.label)}})}),s("th",{staticClass:"uk-text-right pos-table-checkbox uk-text-nowrap"},[s("div",{staticClass:"uk-margin-small-right uk-display-inline-block"},[s("img",{attrs:{src:"/img/icons/icon__edit.svg",width:"16",height:"16","uk-svg":""}})]),s("div",{staticClass:"uk-display-inline-block"},[s("img",{attrs:{height:"16",src:"/img/icons/icon__trash.svg","uk-svg":"",width:"16"}})]),t.massEdit?s("div",{staticClass:"uk-margin-small-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"pos-checkbox-switch danger xsmall uk-display-inline-block",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{click:t.checkedAll,change:function(e){var s=t.checked,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=null,n=t._i(s,r);a.checked?n<0&&(t.checked=s.concat([r])):n>-1&&(t.checked=s.slice(0,n).concat(s.slice(n+1)))}else t.checked=i}}})]):t._e()])],2)]),s("tbody",t._l(t.tableRows,function(e,a){return s("TableRow",{key:a,attrs:{"row-data":e,"mass-edit":t.massEdit,"full-data":t.filterSearch[a],"checked-all":t.checked},on:{check:t.checkedAll}})}),1)]):t._e()])]},proxy:!0}])})},i=[],r=s("75fc"),n=(s("7f7f"),s("ac6a"),s("456d"),{name:"Table",components:{TableRow:function(){return s.e("chunk-16307fe6").then(s.bind(null,"429a"))},Card:function(){return s.e("chunk-2d0aeb59").then(s.bind(null,"0ae7"))}},data:function(){return{searchInput:null,checked:!1,card:{add:!1,folder:0},header:[],editRequired:{name:!0,placeholder:!0,label:!0,type:!0}}},watch:{table:function(){if(this.table){var t=localStorage.getItem("settings_header_rows_"+this.tableId);this.header=t?JSON.parse(t):JSON.parse(JSON.stringify(this.protoLeaf))}}},mounted:function(){"error"===this.notEmptyTable&&(this.$store.commit("card_right_show",!1),this.$store.commit("tree_active",this.tableId),this.$store.dispatch(this.table_api.get,this.tableId))},computed:{tableNotEmpty:function(){if(this.tableRows)return this.tableRows.length>0},table_api:function(){return this.$store.getters.table_api},loader:function(){return this.$store.getters.table_status},protoLeaf:function(){return this.$store.getters["settings/protoLeaf"]},tableId:function(){return this.$route.params.id},notEmptyTable:function(){return this.table&&0===Object.keys(this.table).length?"error":"success"},table:function(){return this.$store.getters.table_items},massEdit:function(){return this.table&&this.table.settings&&this.table.settings.massEdit?this.table.settings.massEdit:0},tableRowDetail:function(){return this.$store.getters.pageTableRow},tableHeader:function(){if(this.header)return this.header.filter(function(t){return 1===t.show})},tableRows:function(){var t=this;if(this.filterSearch){var e=this.filterSearch,s=[],a=this.tableHeader.map(function(t){return t.name});return e.forEach(function(e){var i=[];a.forEach(function(s,a){e.hasOwnProperty(s)&&i.push({val:e[s],key:s,inline:t.tableHeader[a].inline})}),s.push(i)}),s}},filterSearch:function(){var t=this;if(this.table.body){var e=Object(r["a"])(this.table.body);return e.filter(function(e){return!t.searchInput||e.name.toLowerCase().indexOf(t.searchInput.toLowerCase())>-1||e.label.toLowerCase().indexOf(t.searchInput.toLowerCase())>-1})}}},methods:{updateVisibleColumns:function(t){localStorage.setItem("settings_header_rows_"+this.tableId,JSON.stringify(t))},add_row:function(){var t=this,e=JSON.parse(JSON.stringify(this.$store.getters["settings/protoLeaf"]));e.forEach(function(e){"parent"===e.name&&(e.value=t.tableId)}),this.$store.commit("editPanel_status_request"),this.$store.commit("editPanel_add",!0),this.$store.commit("card_right_show",!0),this.$store.commit("editPanel_data",[]),this.$store.commit("editPanel_data",e),this.$store.commit("editPanel_status_success")},notCheckedAll:function(){this.checked=!1},checkedAll:function(){this.checked=!this.checked},clearSearchVal:function(){this.searchInput=null}}}),o=n,c=s("2877"),l=Object(c["a"])(o,a,i,!1,null,null,null);e["default"]=l.exports}}]);